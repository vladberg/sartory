/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * A jQuery Horizontal Slider for iPhone/iPad Safari 
 * This plugin turns any wide element into a touch enabled horizontal slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v1.1.40 (11/29/2012)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ja=0,T=0,$=0,P=0,L="ontouchstart"in window,Aa="onorientationchange"in window,aa=!1,X=!1,Y=!1,ea="pointer",qa="pointer",ka=[],fa=[],ra=[],sa=[],ga=[],E=[],Z=[],y=[],f=[],p=[],ta=[],ba=[],e={showScrollbar:function(g,d){g.scrollbarHide&&a("."+d).css({opacity:g.scrollbarOpacity,filter:"alpha(opacity:"+100*g.scrollbarOpacity+")"})},hideScrollbar:function(a,d,b,D,c,m,f,p,s,v){if(a.scrollbar&&a.scrollbarHide)for(var y=b;y<b+25;y++)d[d.length]=e.hideScrollbarIntervalTimer(10*y,D[b],(b+24- y)/24,c,m,f,p,s,v,a)},hideScrollbarInterval:function(g,d,b,D,c,m,f,y,s){P=-1*g/p[y]*(c-m-f-D);e.setSliderOffset("."+b,P);a("."+b).css({opacity:s.scrollbarOpacity*d,filter:"alpha(opacity:"+100*s.scrollbarOpacity*d+")"})},slowScrollHorizontalInterval:function(g,d,b,D,c,m,N,J,s,v,H,u,q,r,i,x,l,k){if(k.infiniteSlider){if(b<=-1*p[i]){var n=a(g).width();if(b<=-1*ta[i]){var t=-1*H[0];a(d).each(function(b){e.setSliderOffset(a(d)[b],t+x);b<u.length&&(u[b]=-1*t);t+=a(this).outerWidth(!0)});b+=-1*u[0];f[i]= -1*u[0]+x;p[i]=f[i]+n-m;y[i]=0}else{var j=0,B=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this,"x")<B&&(B=e.getSliderOffset(this,"x"),j=a)});q=f[i]+n;e.setSliderOffset(a(d)[j],q);f[i]=-1*u[1]+x;p[i]=f[i]+n-m;u.splice(0,1);u.splice(u.length,0,-1*q+x);y[i]++}}if(b>=-1*f[i]||0<=b){n=a(g).width();if(0<=b){t=-1*H[0];a(d).each(function(b){e.setSliderOffset(a(d)[b],t+x);b<u.length&&(u[b]=-1*t);t+=a(this).outerWidth(!0)});b-=-1*u[0];f[i]=-1*u[0]+x;p[i]=f[i]+n-m;for(y[i]=r;0<-1* u[0]-n+x;){var w=0,I=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),w=a)});q=f[i]-a(d[w]).outerWidth(!0);e.setSliderOffset(a(d)[w],q);u.splice(0,0,-1*q+x);u.splice(u.length-1,1);f[i]=-1*u[0]+x;p[i]=f[i]+n-m;y[i]--;E[i]++}}0>b&&(w=0,I=e.getSliderOffset(a(d[0]),"x"),a(d).each(function(a){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),w=a)}),q=f[i]-a(d[w]).outerWidth(!0),e.setSliderOffset(a(d)[w],q),u.splice(0,0,-1*q+ x),u.splice(u.length-1,1),f[i]=-1*u[0]+x,p[i]=f[i]+n-m,y[i]--)}}H=!1;m=e.calcActiveOffset(k,b,u,m,y[i],r,v,i);q=(m+y[i]+r)%r;k.infiniteSlider?q!=Z[i]&&(H=!0):m!=E[i]&&(H=!0);if(H&&(r=new e.args(k,g,a(g).children(":eq("+q+")"),q,l,!0),a(g).parent().data("args",r),""!=k.onSlideChange))k.onSlideChange(r);E[i]=m;Z[i]=q;b=Math.floor(b);e.setSliderOffset(g,b);k.scrollbar&&(P=Math.floor((-1*b-f[i])/(p[i]-f[i])*(N-J-c)),g=c-s,b>=-1*f[i]?(g=c-s- -1*P,e.setSliderOffset(a("."+D),0)):(b<=-1*p[i]+1&&(g=N-J-s- P),e.setSliderOffset(a("."+D),P)),a("."+D).css({width:g+"px"}))},slowScrollHorizontal:function(g,d,b,D,c,m,N,J,s,v,H,u,q,r,i,x,l,k,n,t){var m=[],j=e.getSliderOffset(g,"x"),B=0,w=25/1024*J;frictionCoefficient=t.frictionCoefficient;elasticFrictionCoefficient=t.elasticFrictionCoefficient;snapFrictionCoefficient=t.snapFrictionCoefficient;5<c&&t.snapToChildren&&!k?B=1:-5>c&&(t.snapToChildren&&!k)&&(B=-1);c<-1*w?c=-1*w:c>w&&(c=w);a(g)[0]!==a(l)[0]&&(B*=-1,c*=-2);l=y[r];if(t.infiniteSlider)var I=f[r],G= p[r];for(var k=[],w=[],h=0;h<q.length;h++)k[h]=q[h],h<d.length&&(w[h]=e.getSliderOffset(a(d[h]),"x"));for(;1<c||-1>c;){c*=frictionCoefficient;j+=c;if((j>-1*f[r]||j<-1*p[r])&&!t.infiniteSlider)c*=elasticFrictionCoefficient,j+=c;if(t.infiniteSlider){if(j<=-1*G){for(var G=a(g).width(),K=0,L=w[0],h=0;h<w.length;h++)w[h]<L&&(L=w[h],K=h);h=I+G;w[K]=h;I=-1*k[1]+n;G=I+G-J;k.splice(0,1);k.splice(k.length,0,-1*h+n);l++}if(j>=-1*I){G=a(g).width();K=0;L=w[0];for(h=0;h<w.length;h++)w[h]>L&&(L=w[h],K=h);h=I-a(d[K]).outerWidth(!0); w[K]=h;k.splice(0,0,-1*h+n);k.splice(k.length-1,1);I=-1*k[0]+n;G=I+G-J;l--}}m[m.length]=j}w=!1;c=e.calcActiveOffset(t,j,k,J,l,x,E[r],r);I=(c+l+x)%x;t.snapToChildren&&(t.infiniteSlider?I!=Z[r]&&(w=!0):c!=E[r]&&(w=!0),0>B&&!w?(c++,c>=q.length&&!t.infinteSlider&&(c=q.length-1)):0<B&&!w&&(c--,0>c&&!t.infinteSlider&&(c=0)));if(t.snapToChildren||(j>-1*f[r]||j<-1*p[r])&&!t.infiniteSlider){j=e.getSliderOffset(g,"x");for(m.splice(0,m.length);j<k[c]-0.5||j>k[c]+0.5;)j=(j-k[c])*snapFrictionCoefficient+k[c], m[m.length]=j;m[m.length]=k[c]}B=1;0!=m.length%2&&(B=0);for(j=0;j<b.length;j++)clearTimeout(b[j]);l=(c+l+x)%x;I=0;for(j=B;j<m.length;j+=2)if(j==B||1<Math.abs(m[j]-I)||j>=m.length-2)I=m[j],b[b.length]=e.slowScrollHorizontalIntervalTimer(10*j,g,d,m[j],D,N,J,s,v,H,c,u,q,i,x,r,n,l,t);I=(c+y[r]+x)%x;""!=t.onSlideComplete&&(b[b.length]=e.onSlideCompleteTimer(10*(j+1),t,g,a(g).children(":eq("+I+")"),I,r));ga[r]=b;e.hideScrollbar(t,b,j,m,D,N,J,v,H,r)},onSlideComplete:function(g,d,b,D,c){var m=ka[c]!=D?!0: !1,b=new e.args(g,a(d),b,D,D,m);a(d).parent().data("args",b);if(""!=g.onSlideComplete)g.onSlideComplete(b);ka[c]=D},getSliderOffset:function(g,d){var b=0,d="x"==d?4:5;if(aa&&!X&&!Y){for(var b=["-webkit-transform","-moz-transform","transform"],e=0;e<b.length;e++)if(void 0!=a(g).css(b[e])&&0<a(g).css(b[e]).length){var c=a(g).css(b[e]).split(",");break}b=parseInt(c[d],10)}else b=parseInt(a(g).css("left"),10);return b},setSliderOffset:function(g,e){aa&&!X&&!Y?a(g).css({webkitTransform:"matrix(1,0,0,1,"+ e+",0)",MozTransform:"matrix(1,0,0,1,"+e+",0)",transform:"matrix(1,0,0,1,"+e+",0)"}):a(g).css({left:e+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ea="-webkit-grab",qa="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ea="move",qa="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?X=!0:null!=navigator.userAgent.match("MSIE 8")?Y=!0:navigator.userAgent.match("MSIE 9")},has3DTransform:function(){var e=!1,d=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)", MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==d.attr("style")?e=!1:void 0!=d.attr("style")&&(e=!0);return e},getSlideNumber:function(a,e,b){return(a-y[e]+b)%b},calcActiveOffset:function(a,e,b,D){for(var c=!1,a=[],m,f=0;f<b.length;f++)b[f]<=e&&b[f]>e-D&&(!c&&b[f]!=e&&(a[a.length]=b[f-1]),a[a.length]=b[f],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(f=c=0;f<a.length;f++){var p=Math.abs(e-a[f]);p<D&&(c=a[f],D=p)}for(f=0;f<b.length;f++)c==b[f]&&(m=f);return m},changeSlide:function(g, d,b,f,c,m,p,J,s,v,H,u,q,r,i,x,l){e.autoSlidePause(q);for(var k=0;k<f.length;k++)clearTimeout(f[k]);var n=Math.ceil(l.autoSlideTransTimer/10)+1,t=e.getSliderOffset(d,"x"),j=u[g],B=j-t;if(l.infiniteSlider){g=(g-y[q]+2*i)%i;k=!1;0==g&&2==i&&(g=i,u[g]=u[g-1]-a(b).eq(0).outerWidth(!0),k=!0);j=u[g];B=j-t;j=[u[g]-a(d).width(),u[g]+a(d).width()];k&&u.splice(u.length-1,1);for(k=0;k<j.length;k++)Math.abs(j[k]-t)<Math.abs(B)&&(B=j[k]-t)}var j=[],w;e.showScrollbar(l,c);for(k=0;k<=n;k++)w=k,w/=n,w--,w=t+B*(Math.pow(w, 5)+1),j[j.length]=w;for(k=t=0;k<j.length;k++){if(0==k||1<Math.abs(j[k]-t)||k>=j.length-2)t=j[k],f[k]=e.slowScrollHorizontalIntervalTimer(10*(k+1),d,b,j[k],c,m,p,J,s,v,g,H,u,r,i,q,x,g,l);0==k&&""!=l.onSlideStart&&(n=(E[q]+y[q]+i)%i,l.onSlideStart(new e.args(l,d,a(d).children(":eq("+n+")"),n,g,!1)))}t=!1;n=(g+y[q]+i)%i;l.infiniteSlider?n!=Z[q]&&(t=!0):g!=E[q]&&(t=!0);t&&""!=l.onSlideComplete&&(f[f.length]=e.onSlideCompleteTimer(10*(k+1),l,d,a(d).children(":eq("+n+")"),n,q));ga[q]=f;e.hideScrollbar(l, f,k,j,c,m,p,s,v,q);e.autoSlide(d,b,f,c,m,p,J,s,v,H,u,q,r,i,x,l)},autoSlide:function(a,d,b,f,c,m,p,J,s,v,H,u,q,r,i,x){if(!x.autoSlide)return!1;e.autoSlidePause(u);fa[u]=setTimeout(function(){!x.infiniteSlider&&E[u]>H.length-1&&(E[u]-=r);e.changeSlide((E[u]+y[u]+r+1)%r,a,d,b,f,c,m,p,J,s,v,H,u,q,r,i,x);e.autoSlide(a,d,b,f,c,m,p,J,s,v,H,u,q,r,i,x)},x.autoSlideTimer+x.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(fa[a])},isUnselectable:function(e,d){return""!=d.unselectableSelector&&1== a(e).closest(d.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,d,b,f,c,m,p,y,s,v,E,u,q,r,i,x,l,k,n){return setTimeout(function(){e.slowScrollHorizontalInterval(d,b,f,c,m,p,y,s,v,E,u,q,r,i,x,l,k,n)},a)},onSlideCompleteTimer:function(a,d,b,f,c,m){return setTimeout(function(){e.onSlideComplete(d,b,f,c,m)},a)},hideScrollbarIntervalTimer:function(a,d,b,f,c,m,p,y,s,v){return setTimeout(function(){e.hideScrollbarInterval(d,b,f,c,m,p,y,s,v)},a)},args:function(g,d,b,f,c,m){this.settings= g;this.data=a(d).parent().data("iosslider");this.slideChanged=m;this.sliderObject=d;this.sliderContainerObject=a(d).parent();this.currentSlideObject=b;this.currentSlideNumber=f+1;this.targetSlideObject=a(d).children(":eq("+c+")");this.targetSlideNumber=c+1;this.currentSliderOffset=-1*e.getSliderOffset(d,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};e.setBrowserInfo();var R={init:function(g,d){aa= e.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1, keyboardControls:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},g);void 0==d&&(d=this);return a(d).each(function(){function d(){e.autoSlidePause(c);ua= a(A).find("a");xa=a(A).find("[onclick]");la=a(A).find("*");a(k).css("width","");a(k).css("height","");a(A).css("width","");z=a(A).children().not("script").get();ma=[];U=[];a(z).css("width","");p[c]=0;h=[];i=a(k).parent().width();n=a(k).outerWidth(!0);b.responsiveSlideContainer&&(n=a(k).outerWidth(!0)>i?i:a(k).outerWidth(!0));a(k).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow,zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden", width:n});a(b.unselectableSelector).css({cursor:"default"});for(var C=0;C<z.length;C++){ma[C]=a(z[C]).width();U[C]=a(z[C]).outerWidth(!0);var w=U[C];b.responsiveSlides&&(w=U[C]>n?n+-1*(U[C]-ma[C]):ma[C],a(z[C]).css({width:w}));a(z[C]).css({webkitBackfaceVisibility:"hidden",position:"absolute",top:0});h[C]=-1*p[c];p[c]+=U[C]}b.snapSlideCenter&&(l=0.5*(n-U[0]));ta[c]=2*p[c];for(C=0;C<z.length;C++)e.setSliderOffset(a(z[C]),-1*h[C]+p[c]+l),h[C]-=p[c];if(!b.infiniteSlider&&!b.snapSlideCenter){for(C=0;C< h.length&&!(h[C]<=-1*(2*p[c]-n));C++)fa=C;h.splice(fa+1,h.length);h[h.length]=-1*(2*p[c]-n)}for(C=0;C<h.length;C++)K[C]=h[C];I&&(b.startAtSlide=b.startAtSlide>h.length?h.length:b.startAtSlide,E[c]=b.startAtSlide-1,Z[c]=E[c]);f[c]=p[c]+l;a(A).css({position:"relative",cursor:ea,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:p[c]+"px"});V=p[c];p[c]=2*p[c]-n+2*l;(O=V<n?!0:!1)&&a(A).css({cursor:"default"});x=a(k).parent().outerHeight(!0);t=a(k).height();b.responsiveSlideContainer&&(t=t> x?x:t);a(k).css({height:t});e.setSliderOffset(A,h[E[c]]);if(b.infiniteSlider&&!O){e.getSliderOffset(a(A),"x");for(C=-1*((y[c]+F)%F);0>C;){var D=0,G=e.getSliderOffset(a(z[0]),"x");a(z).each(function(a){e.getSliderOffset(this,"x")<G&&(G=e.getSliderOffset(this,"x"),D=a)});w=f[c]+V;e.setSliderOffset(a(z)[D],w);f[c]=-1*h[1]+l;p[c]=f[c]+V-n;h.splice(0,1);h.splice(h.length,0,-1*w+l);C++}for(;0<-1*h[0]-V+l&&b.snapSlideCenter&&I;){var J=0,ya=e.getSliderOffset(a(z[0]),"x");a(z).each(function(a){e.getSliderOffset(this, "x")>ya&&(ya=e.getSliderOffset(this,"x"),J=a)});w=f[c]-U[J];e.setSliderOffset(a(z)[J],w);h.splice(0,0,-1*w+l);h.splice(h.length-1,1);f[c]=-1*h[0]+l;p[c]=f[c]+V-n;y[c]--;E[c]++}}e.setSliderOffset(A,h[E[c]]);!L&&!b.desktopClickDrag&&a(A).css({cursor:"default"});b.scrollbar&&(a("."+s).css({margin:b.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+s+" ."+v).css({border:b.scrollbarBorder}),j=parseInt(a("."+s).css("marginLeft"))+parseInt(a("."+s).css("marginRight")),B=parseInt(a("."+s+" ."+v).css("borderLeftWidth"), 10)+parseInt(a("."+s+" ."+v).css("borderRightWidth"),10),q=""!=b.scrollbarContainer?a(b.scrollbarContainer).width():n,r=(q-j)/F,b.scrollbarHide||(R=b.scrollbarOpacity),a("."+s).css({position:"absolute",left:0,width:q-j+"px",margin:b.scrollbarMargin}),"top"==b.scrollbarLocation?a("."+s).css("top","0"):a("."+s).css("bottom","0"),a("."+s+" ."+v).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground,height:b.scrollbarHeight,width:r-B+"px",minWidth:b.scrollbarHeight,border:b.scrollbarBorder, webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:R,filter:"alpha(opacity:"+100*R+")",boxShadow:b.scrollbarShadow}),e.setSliderOffset(a("."+s+" ."+v),Math.floor((-1*h[E[c]]-f[c]+l)/(p[c]-f[c])*(q-j-r))),a("."+s).css({display:"block"}),H=a("."+s+" ."+v),u=a("."+s));b.scrollbarDrag&&!O&&a("."+s+" ."+v).css({cursor:ea});b.infiniteSlider&&(M=(p[c]+n)/3);""!=b.navSlideSelector&&a(b.navSlideSelector).each(function(d){a(this).css({cursor:"pointer"});a(this).unbind(W).bind(W, function(){e.changeSlide(d,A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(W).bind(W,function(){var a=(E[c]+y[c]+F)%F;(0<a||b.infiniteSlider)&&e.changeSlide(a-1,A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}),a(b.navNextSelector).unbind(W).bind(W,function(){var a=(E[c]+y[c]+F)%F;(a<h.length-1||b.infiniteSlider)&&e.changeSlide(a+1,A,z,g,v,r,n,q,j,B,K,h,c,M, F,l,b)}));b.autoSlide&&!O&&(""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}),a(b.autoSlideToggleSelector).unbind(W).bind(W,function(){ca?(e.autoSlide(A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b),ca=!1,a(b.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(c),ca=!0,a(b.autoSlideToggleSelector).addClass("on"))})),!ca&&!O&&e.autoSlide(A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b),L?a(k).bind("touchend.iosSliderEvent",function(){!ca&&!O&&e.autoSlide(A,z,g,v,r,n,q,j,B,K,h,c,M,F,l, b)}):(a(k).bind("mouseenter.iosSliderEvent",function(){e.autoSlidePause(c)}),a(k).bind("mouseleave.iosSliderEvent",function(){!ca&&!O&&e.autoSlide(A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b)})));a(k).data("iosslider",{obj:za,settings:b,scrollerNode:A,slideNodes:z,numberOfSlides:F,centeredSlideOffset:l,sliderNumber:c,originalOffsets:K,childrenOffsets:h,sliderMax:p[c],scrollbarClass:v,scrollbarWidth:r,scrollbarStageWidth:q,stageWidth:n,scrollMargin:j,scrollBorder:B,infiniteSliderOffset:y[c],infiniteSliderWidth:M}); I=!1;return!0}ja++;var c=ja,g=[];ra[c]=b;f[c]=0;p[c]=0;var N=[0,0],J=[0,0],s="scrollbarBlock"+ja,v="scrollbar"+ja,H,u,q,r,i,x,l=0,k=a(this),n,t,j,B,w,I=!0,G=-1,h,K=[],R=0,Q=0,aa=0,A=a(this).children(":first-child"),z,ma,U,F=a(A).children().not("script").size(),S=!1,fa=0,va=!1,na=void 0,M;y[c]=0;var O=!1;ka[c]=-1;var ca=!1;sa[c]=!1;var oa,pa=!1,ha=!1,V,W=L?"touchstart.iosSliderEvent":"click.iosSliderEvent",ua,xa,la;ba[c]=!1;ga[c]=[];b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var za=a(this); if(void 0!=za.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.scrollbar&&(""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+s+"'><div class = '"+v+"'></div></div>"):a(A).parent().append("<div class = '"+s+"'><div class = '"+v+"'></div></div>"));if(!d())return!0;a(this).find("a").bind("mousedown",e.preventDrag);a(this).find("[onclick]").bind("click",e.preventDrag).each(function(){a(this).data("onclick", this.onclick)});var G=e.calcActiveOffset(b,e.getSliderOffset(a(A),"x"),h,n,y[c],F,void 0,c),G=(G+y[c]+F)%F,da=new e.args(b,A,a(A).children(":eq("+G+")"),G,G,!1);a(k).data("args",da);if(""!=b.onSliderLoaded)b.onSliderLoaded(da);ka[c]=G;if(ra[c].responsiveSlides||ra[c].responsiveSlideContainer)G=Aa?"orientationchange":"resize",a(window).bind(G+".iosSliderEvent",function(){if(!d())return!0});b.keyboardControls&&!O&&a(document).bind("keydown.iosSliderEvent",function(a){!X&&!Y&&(a=a.originalEvent);switch(a.keyCode){case 37:a= (E[c]+y[c]+F)%F;(0<a||b.infiniteSlider)&&e.changeSlide(a-1,A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b);break;case 39:a=(E[c]+y[c]+F)%F,(a<h.length-1||b.infiniteSlider)&&e.changeSlide(a+1,A,z,g,v,r,n,q,j,B,K,h,c,M,F,l,b)}});if(L||b.desktopClickDrag){var da=L?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",ia=a(A),G=a(A),wa=!1;b.scrollbarDrag&&(ia=ia.add(H),G=G.add(u));a(ia).bind(da,function(d){if(ba[c]||O||(wa=e.isUnselectable(d.target,b)))return!0;oa=a(this)[0]===a(H)[0]?H:A;!X&&!Y&&(d=d.originalEvent); e.autoSlidePause(c);la.unbind(".disableClick");L?(eventX=d.touches[0].pageX,eventY=d.touches[0].pageY):(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=d.pageX,eventY=d.pageY,va=!0,na=A,a(this).css({cursor:qa}));N=[0,0];J=[0,0];T=0;S=!1;for(d=0;d<g.length;d++)clearTimeout(g[d]);d=e.getSliderOffset(A,"x");d>-1*f[c]+l+V?(d=-1*f[c]+l+V,e.setSliderOffset(a("."+ v),d),a("."+v).css({width:r-B+"px"})):d<-1*p[c]&&(e.setSliderOffset(a("."+v),q-j-r),a("."+v).css({width:r-B+"px"}));d=a(this)[0]===a(H)[0]?f[c]:0;Q=-1*(e.getSliderOffset(this,"x")-eventX-d);e.getSliderOffset(this,"y");N[1]=eventX;J[1]=eventY;ha=!1});da=L?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";a(G).bind(da,function(d){!X&&!Y&&(d=d.originalEvent);if(ba[c]||O||wa)return!0;var g=0;L||(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&& window.getSelection().removeAllRanges():document.selection&&document.selection.empty());if(L)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else if(eventX=d.pageX,eventY=d.pageY,!va||("undefined"!=typeof d.webkitMovementX||"undefined"!=typeof d.webkitMovementY)&&0===d.webkitMovementY&&0===d.webkitMovementX)return!1;N[0]=N[1];N[1]=eventX;T=(N[1]-N[0])/2;J[0]=J[1];J[1]=eventY;$=(J[1]-J[0])/2;if(!S){var i=(E[c]+y[c]+F)%F,i=new e.args(b,A,a(A).children(":eq("+i+")"),i,i,!1);a(k).data("args",i);if(""!= b.onSlideStart)b.onSlideStart(i)}if((3<$||-3>$)&&3>T&&-3<T&&L&&!S)pa=!0;(5<T||-5>T)&&L?(d.preventDefault(),S=!0):L||(S=!0);if(S&&!pa){var i=e.getSliderOffset(A,"x"),m=a(this)[0]===a(u)[0]?f[c]:0,t=a(this)[0]===a(u)[0]?(f[c]-p[c])/(q-j-r):1,D=a(this)[0]===a(u)[0]?b.scrollbarElasticPullResistance:b.elasticPullResistance;L&&(aa!=d.touches.length&&(Q=-1*i+eventX),aa=d.touches.length);if(b.infiniteSlider){if(i<=-1*p[c]){var s=a(A).width();if(i<=-1*ta[c]){var x=-1*K[0];a(z).each(function(b){e.setSliderOffset(a(z)[b], x+l);b<h.length&&(h[b]=-1*x);x+=a(this).outerWidth(!0)});Q-=-1*h[0];f[c]=-1*h[0]+l;p[c]=f[c]+s-n;y[c]=0}else{var G=0,I=e.getSliderOffset(a(z[0]),"x");a(z).each(function(a){e.getSliderOffset(this,"x")<I&&(I=e.getSliderOffset(this,"x"),G=a)});D=f[c]+s;e.setSliderOffset(a(z)[G],D);f[c]=-1*h[1]+l;p[c]=f[c]+s-n;h.splice(0,1);h.splice(h.length,0,-1*D+l);y[c]++}}if(i>=-1*f[c]||0<=i)if(s=a(A).width(),0<=i){x=-1*K[0];a(z).each(function(b){e.setSliderOffset(a(z)[b],x+l);b<h.length&&(h[b]=-1*x);x+=a(this).outerWidth(!0)}); Q+=-1*h[0];f[c]=-1*h[0]+l;p[c]=f[c]+s-n;for(y[c]=F;0<-1*h[0]-s+l;){var H=0,M=e.getSliderOffset(a(z[0]),"x");a(z).each(function(a){e.getSliderOffset(this,"x")>M&&(M=e.getSliderOffset(this,"x"),H=a)});D=f[c]-a(z[H]).outerWidth(!0);e.setSliderOffset(a(z)[H],D);h.splice(0,0,-1*D+l);h.splice(h.length-1,1);f[c]=-1*h[0]+l;p[c]=f[c]+s-n;y[c]--;E[c]++}}else H=0,M=e.getSliderOffset(a(z[0]),"x"),a(z).each(function(a){e.getSliderOffset(this,"x")>M&&(M=e.getSliderOffset(this,"x"),H=a)}),D=f[c]-a(z[H]).outerWidth(!0), e.setSliderOffset(a(z)[H],D),h.splice(0,0,-1*D+l),h.splice(h.length-1,1),f[c]=-1*h[0]+l,p[c]=f[c]+s-n,y[c]--}else s=a(A).width(),i>-1*f[c]+l&&(g=-1*(f[c]+-1*(Q-m-eventX+l)*t-m)*D/t),i<-1*p[c]&&(g=-1*(p[c]+-1*(Q-m-eventX)*t-m)*D/t);e.setSliderOffset(A,-1*(Q-m-eventX-g)*t-m);b.scrollbar&&(e.showScrollbar(b,v),P=Math.floor((Q-eventX-g-f[c]+l)/(p[c]-f[c])*(q-j-r)*t),m=r,i>=-1*f[c]+l+s?(m=r-B- -1*P,e.setSliderOffset(a("."+v),0),a("."+v).css({width:m+"px"})):i<=-1*p[c]+1?(m=q-j-B-P,e.setSliderOffset(a("."+ v),P),a("."+v).css({width:m+"px"})):e.setSliderOffset(a("."+v),P));L&&(w=d.touches[0].pageX);d=!1;g=e.calcActiveOffset(b,-1*(Q-eventX-g),h,n,y[c],F,void 0,c);s=(g+y[c]+F)%F;b.infiniteSlider?s!=Z[c]&&(d=!0):g!=E[c]&&(d=!0);if(d&&(E[c]=g,Z[c]=s,ha=!0,i=new e.args(b,A,a(A).children(":eq("+s+")"),s,s,!0),a(k).data("args",i),""!=b.onSlideChange))b.onSlideChange(i)}});a(ia).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(ba[c]||O||wa)return!0;if(0!=a.touches.length)for(var d=0;d<a.touches.length;d++)a.touches[d].pageX== w&&e.slowScrollHorizontal(A,z,g,v,T,$,r,n,q,j,B,K,h,c,M,F,oa,ha,l,b);else e.slowScrollHorizontal(A,z,g,v,T,$,r,n,q,j,B,K,h,c,M,F,oa,ha,l,b);pa=!1});if(!L){G=a(window);if(Y||X)G=a(document);a(G).bind("mouseup.iosSliderEvent"+c,function(){S?ua.unbind("click.disableClick").bind("click.disableClick",e.preventClick):ua.unbind("click.disableClick").bind("click.disableClick",e.enableClick);xa.each(function(){this.onclick=function(b){if(S)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<= parseFloat(a().jquery)?la.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",e.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&la.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",e.preventClick);var b=a(this).data("events").click, c=b.pop();b.splice(0,0,c)}});if(!sa[c]){if(O)return!0;a(ia).css({cursor:ea});va=!1;if(void 0==na)return!1;e.slowScrollHorizontal(na,z,g,v,T,$,r,n,q,j,B,K,h,c,M,F,oa,ha,l,b);na=void 0}pa=!1})}}})},destroy:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var b=a(this),d=b.data("iosslider");if(void 0==d)return!1;void 0==g&&(g=!0);e.autoSlidePause(d.sliderNumber);sa[d.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+d.sliderNumber);a(document).unbind(".iosSliderEvent-"+d.sliderNumber); a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");g&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(d.settings.navSlideSelector).attr("style",""),a(d.settings.navPrevSelector).attr("style",""),a(d.settings.navNextSelector).attr("style",""),a(d.settings.autoSlideToggleSelector).attr("style",""),a(d.settings.unselectableSelector).attr("style", ""));d.settings.scrollbar&&a(".scrollbarBlock"+d.sliderNumber).remove();for(var d=ga[d.sliderNumber],c=0;c<d.length;c++)clearTimeout(d[c]);b.removeData("iosslider")})},update:function(g){void 0==g&&(g=this);return a(g).each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;R.destroy(!1,this);d.settings.startAtSlide=1==d.numberOfSlides?d.settings.startAtSlide:(E[d.sliderNumber]+1+y[d.sliderNumber]+d.numberOfSlides)%d.numberOfSlides;R.init(d.settings,this);var b=new e.args(d.settings, d.scrollerNode,a(d.scrollerNode).children(":eq("+(d.settings.startAtSlide-1)+")"),d.settings.startAtSlide-1,d.settings.startAtSlide-1,!1);a(d.stageNode).data("args",b);if(""!=d.settings.onSliderUpdate)d.settings.onSliderUpdate(b)})},addSlide:function(e,d){return this.each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;d<=b.numberOfSlides?a(b.scrollerNode).children(":eq("+(d-1)+")").before(e):a(b.scrollerNode).children(":eq("+(d-2)+")").after(e);E[b.sliderNumber]>d-2&&E[b.sliderNumber]++; R.update(this)})},removeSlide:function(e){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;a(d.scrollerNode).children(":eq("+(e-1)+")").remove();E[d.sliderNumber]>e-1&&E[d.sliderNumber]--;R.update(this)})},goToSlide:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;g=g-1>b.childrenOffsets.length?b.childrenOffsets.length-1:g-1;e.changeSlide(g,a(b.scrollerNode),a(b.slideNodes),ga[b.sliderNumber],b.scrollbarClass, b.scrollbarWidth,b.stageWidth,b.scrollbarStageWidth,b.scrollMargin,b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);E[b.sliderNumber]=g})},lock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;ba[e.sliderNumber]=!0})},unlock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;ba[e.sliderNumber]=!1})},getData:function(){return this.each(function(){var e= a(this).data("iosslider");return void 0==e?!1:e})}};a.fn.iosSlider=function(e){if(R[e])return R[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return R.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);